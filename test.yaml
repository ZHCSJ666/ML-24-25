# @package _global_

defaults:
  - _self_
  - data: commit-chronicle
  - model: t5-efficient-tiny
  - callbacks: null
  - logger: null
  - trainer: default
  - paths: default
  - extras: default
  - hydra: default
  - experiment: null

task_name: "eval"

tags: ["dev"]

# passing checkpoint path is necessary for evaluation
ckpt_path: logs/train/runs/2025-01-21_23-11-27/checkpoints/last.ckpt

model:
  net:
    encoder_context_max_len: 1008
    decoder_context_max_len: 16
    encoder_vocab_size:
      _target_: builtins.len
      _args_:
        - ${data.diff_tokenizer}
    decoder_vocab_size:
      _target_: builtins.len
      _args_:
        - ${data.msg_tokenizer}
    model:
      config:
        num_decoder_layers: 4

data:
  batch_size: 128
  diff_max_len: ${model.net.encoder_context_max_len}
  msg_max_len: ${model.net.decoder_context_max_len}
  diff_tokenizer:
    name_or_path: /root/autodl-tmp/ML-24-25-fix-seq2seq/google-t5-efficient-tiny
  msg_tokenizer:
    name_or_path: /root/autodl-tmp/ML-24-25-fix-seq2seq/google-t5-efficient-tiny
